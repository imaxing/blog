---
title: 记录一些面试中虽然不难但是没能记住的知识点
date: 2020-02-27 18:20:37
tags:
 - vue
---

### 前言
最近在找新的工作, 面试的时候总会遇到一些问题虽然不难但没能记住的点
虽然做项目的时候大部分问题用到的时候能想起来或者去查阅文档
但是我觉着还是记在脑子里面比较好
所以写下此篇文章加深点记忆

<!--more-->
---

#### *vue 实现 v-model 的多种情况*
这个问题很简单对吧? 没错我也正常回答出来.
不就是给组件传递一个 value prop 然后组件内部通过派发一个 input 事件出来就可以实现了吗~
但是如果出现了派发事件的时候事件名称出现了冲突呢? 
这个时候就需要用到 vue 官方提供的 [model](https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model) 属性了
官方示例代码:
```javascript
Vue.component('base-checkbox', {
  model: {
    prop: 'checked',
    event: 'change'
  },
  props: {
    checked: Boolean
  },
  template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      v-on:change="$emit('change', $event.target.checked)"
    >
  `
})
```

假设组件内要v-model 两个值
一个是 `<input type="checkbox" />` 变化的时候
一个是 `<input type="text" />` 变化的时候
如果都使用 input 事件派发就冲突了, 
通过这个配置就可以 checkbox 使用 `change`事件, input 使用 `input`事件进行派发了

---

#### *vue 的 sync修饰符*
说来惭愧, 大大小小也做过不少 vue 的项目了
但是一直没使用到 sync 修饰符, 文档也没有看全面
面试问到的时候就不知道是用在什么场景下的了, 减分!
面试结束后查了下官方文档, 先来说下自己的理解, 一般在子组件如果修改父组件数据的时候可以选择下面的方式:
```javascript
// 通过 $parent 属性直接修改
this.$parent.xxx = 'xxx'

// 或者 $emit 派发事件通知父组件修改
this.$emit('changeParentData', 'xxx')
changeParentData (newData) {
  // 修改数据代码
}
```
在不适用 vuex 的情况下这么去做都不会有任何问题
但 $parent 的缺点就是直接把父子组件进行耦合不再好拆解复用了
emit应该是比较常用的方法了;
但 sync 修饰符应该算是把 emit 这个方法变成了类似 v-model 的效果

- ##### 如果没使用 sync 修饰符是这样的
```javascript

// 子组件 ChildCom
<span @click="emit('updateMessage', 'new message')">{{message}}</span>


// 父组件接收事件

// html
<ChildCom :message="message" @updateMessage="updateMessage" />
// js
{
  data: () => ({ message: '这是测试内容' }),
  method: {
    updateMessage (newMsg) {
      this.message = newMsg
    }
  }
}
```

- ##### 如果使用 sync 修饰符是这样的

```javascript
// 子组件
<span @click="emit('update:message', 'new message')">{{message}}</span>

// 父组件
// 直接省略掉了更新 message 的方法调用, 也不用定义这个方法了
<ChildCom :message.sync="message" />
```

所以使用这个 sync 修饰符是比较方便的
具体的使用场景我想到了在使用 elementUi 的 [Dialog](https://element.eleme.cn/#/zh-CN/component/dialog#zi-ding-yi-nei-rong)组件的时候有用到这个属性
(这是自己偷懒没有去查阅这个文档🤪)
> 
  封装弹窗组件一般是在内部 watch 这个 visible prop 一旦变化控制是否显示
  如果不使用 sync 修饰符就要组件调用的地方手动同步 visible 的状态
  但是使用这个属性后, 在点击 close 图标或者点击蒙层的时候直接通知外部状态变化就可以了还是很有帮助的

![](https://tva1.sinaimg.cn/large/0082zybpgy1gcb5yyyq00j31dw0rgq88.jpg)


#### 参考
 - [.sync 修饰符](https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6)
